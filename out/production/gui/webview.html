<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
</head>

<style>
  body {
    background: #fcfcfa;
    height: 500px;
    position: relative;
    width: 960px;
  }

  .stroke {
    fill: none;
    stroke: #000;
    stroke-width: 3px;
  }

  .fill {
    fill: #fff;
  }

  .graticule {
    fill: none;
    stroke: #777;
    stroke-width: .5px;
    stroke-opacity: .5;
  }

  .land {
    fill: #222;
  }

  .boundary {
    fill: none;
    stroke: #fff;
    stroke-width: .5px;
  }
</style>

<body>
  <main>
    <script src="https://d3js.org/d3.v4.js"></script>
    <script src="https://d3js.org/d3-geo-projection.v2.min.js"></script>
    <script src="https://d3js.org/topojson.v2.min.js"></script>
    <script type="text/javascript">
      var jsConnector = {
        update: function(longtitude, latitude) {
          var x = projection([parseFloat(longtitude, 10), parseFloat(latitude, 10)])[0]
          var y = projection([parseFloat(longtitude, 10), parseFloat(latitude, 10)])[1]
          svg.select(".iss")
            .attr('cx', x)
            .attr('cy', y)
        }
      };

      function getJsConnector() {
        return jsConnector;
      };

      var width = 970,
        height = 500;
      var projection = d3.geoNaturalEarth().translate([480, 255])
      var path = d3.geoPath(projection);
      var graticule = d3.geoGraticule();
      var svg = d3.select("body").append("svg")
        .attr("width", width)
        .attr("height", height);
      var defs = svg.append('defs');
      defs.append("path")
        .datum({
          type: "Sphere"
        })
        .attr("id", "sphere")
        .attr("d", path);

        defs.append("filter")
        .attr("id", "filter")
        .attr('x', '0%')
        .attr('y', '0%')
        .attr("height", '100%')
        .attr("width", '100%')
        .append('feImage')
        .attr("xlink:href", "iss.png")
      svg.append("use")
        .attr("class", "stroke")
        .attr("xlink:href", "#sphere");
      svg.append("use")
        .attr("class", "fill")
        .attr("xlink:href", "#sphere");
      svg.append("path")
        .datum(graticule)
        .attr("class", "graticule")
        .attr("d", path);
      d3.json("map.json", function(error, world) {
        if (error) throw error;
        svg.insert("path", ".graticule")
          .datum(topojson.feature(world, world.objects.land))
          .attr("class", "land")
          .attr("d", path);
      });

      svg.append("circle")
        .attr('class', 'iss')
        .attr('cx', 20)
        .attr('cy', 20)
        .attr('r', 15 )
        .style("fill", "#ffcc00")
        .attr('filter', 'url(#filter)')
    </script>
  </main>
</body>

</html>